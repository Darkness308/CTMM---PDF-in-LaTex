\ProvidesPackage{style/form-elements}[2025/08/02 CTMM Form Elements v1.2.0]

% Required packages
\RequirePackage{tikz}
\RequirePackage{xcolor}
\RequirePackage{ifthen}
\RequirePackage{calc}
\RequirePackage{forloop}
\RequirePackage{pifont}  % Für Checkbox-Symbole

% Wichtig für \@ifpackageloaded
\makeatletter
% Check if hyperref is loaded for interactive forms
\@ifpackageloaded{hyperref}{%
    % hyperref is already loaded - just enable interactive mode
    \newcommand{\@ctmmInteractive}{true}%
}{%
    % hyperref is not loaded - load it and set interactive mode
    \RequirePackage{hyperref}%
    \newcommand{\@ctmmInteractive}{true}%
}
\makeatother

% Text Field mit verbessertem Design
% Usage: \ctmmTextField[width]{default text}{field name}
\newcommand{\ctmmTextField}[3][4cm]{%
    \ifthenelse{\equal{\@ctmmInteractive}{true}}{%
        \TextField[%
            name=#3,%
            width=#1,%
            height=14pt,%
            bordercolor=ctmmBlue,%
            backgroundcolor=ctmmBlue!2!white,%
            borderwidth=1pt,%
            borderstyle=S,%
            charsize=10pt,%
            maxlen=100,%
            default={#2}%
        ]{}%
    }{%
        \underline{\hspace{#1}}%
    }%
}

% Text area
% Usage: \ctmmTextArea[width]{lines}{field name}{default text}
\newcounter{ctmmTextAreaLine}
\newcommand{\ctmmTextArea}[4][12cm]{%
    \ifthenelse{\equal{\@ctmmInteractive}{true}}{%
        \TextField[%
            name=#3,%
            width=#1,%
            height=\the\numexpr #2*15\relax pt,%
            multiline=true,%
            bordercolor=ctmmBlue,%
            backgroundcolor=white,%
            borderwidth=1pt,%
            borderstyle=S,%
            charsize=10pt,%
            default={#4}%
        ]{}%
    }{%
        \parbox[t]{#1}{%
            \vspace{0.2cm}%
            \forloop{ctmmTextAreaLine}{1}{\value{ctmmTextAreaLine} < \numexpr#2+1\relax}{%
                \underline{\hspace{\linewidth}}\\[1.5ex]%
            }%
        }%
    }%
}

% Checkbox mit verbessertem Design
% Usage: \ctmmCheckBox[field name]{label}
\newcommand{\ctmmCheckBox}[2][]{%
    \ifthenelse{\equal{\@ctmmInteractive}{true}}{%
        \CheckBox[%
            name=#1,%
            width=14pt,%
            height=14pt,%
            bordercolor=ctmmGreen,%
            backgroundcolor=white,%
            borderwidth=1.5pt,%
            borderstyle=S,%
            checkboxsymbol={\textcolor{ctmmGreen}{\ding{51}}}%
        ]{\raisebox{0.1ex}{\small\,#2}}%
    }{%
        \raisebox{-0.1ex}{\tikz[baseline=-0.1ex]{\draw[color=ctmmGreen, line width=1pt] (0,0) rectangle (0.35,0.35);}} \small\,#2%
    }%
}

% Radio Button
% Usage: \ctmmRadioButton{group name}{field value}{label}
\newcommand{\ctmmRadioButton}[3]{%
    \ifthenelse{\equal{\@ctmmInteractive}{true}}{%
        \ChoiceMenu[radio,name=#1]{}{#2=#3}%
    }{%
        \raisebox{-0.1ex}{\tikz{\draw[color=ctmmGreen, rounded corners] (0,0) rectangle (0.3,0.3);}} #3%
    }%
}

% Daily Input for tables
\newcommand{\dailyInput}{\underline{\hspace{0.7cm}}}